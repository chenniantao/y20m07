<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>204-老师发布作业.html</title>
</head>
<body>
    
</body>
<script>
    (function(w){
        function Teacher(name){
            this.name = name
            this.students = []
        }

        Teacher.prototype = {
            constructor:Teacher,
            register:function(student){
                this.students.push(student)
            },
            publish:function(task){
                for(var i = 0,len = this.students.length;i<len;i++){
                    this.students[i].listen(task)
                }
            }
        }

        w.Teacher = Teacher
    })(window);

    (function(w){
        function Student(name,teacher){
            this.name = name
            teacher.register(this)

        }
        Student.prototype = {
            constructor:Student,
            listen:function(task){
                console.log(this.name + '收到作业:' + task)
            }
        }        
        w.Student = Student
    })(window);

    var t1 = new Teacher('Tom')

    var s1 = new Student('张三',t1)
    var s2 = new Student('李四',t1)
    var s3 = new Student('王五',t1)


    t1.publish('coding...')
    t1.publish('running...')












</script>
</html>